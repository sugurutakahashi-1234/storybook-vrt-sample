# Storybook VRTï¼ˆãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆï¼‰ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
#
# packages/ui/ é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸ PR ã§è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
# Storybook ã‚’ãƒ“ãƒ«ãƒ‰ã—ã€å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®å½±ã€‚
# PR æ™‚ã¯ãƒ™ãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’å‹•çš„ç”Ÿæˆã—ã€reg-cli ã§å·®åˆ†ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã€‚
name: Storybook VRT

on:
  pull_request:
    branches: [main]
    # packages/ui/ ã®å¤‰æ›´æ™‚ã®ã¿å®Ÿè¡Œï¼ˆapps/web/ ã®ã¿ã®å¤‰æ›´ã§ã¯ä¸è¦ï¼‰
    paths:
      - "packages/ui/**"
  workflow_dispatch:

jobs:
  vrt:
    # NOTE: VS Code ã® GitHub Actions æ‹¡å¼µãŒ "Unable to find reusable workflow" ã¨è¡¨ç¤ºã™ã‚‹ãŒã€
    # ãƒ­ãƒ¼ã‚«ãƒ«ã® workflow_call ã‚’è§£æ±ºã§ããªã„æ‹¡å¼µã®æ—¢çŸ¥ã®åˆ¶é™ã§ã‚ã‚Šã€å®Ÿéš›ã®å®Ÿè¡Œã«ã¯å½±éŸ¿ã—ãªã„ã€‚
    uses: ./.github/workflows/_playwright-test.yml
    with:
      test-type: storybook-vrt
      working-directory: packages/ui
      build-command: bun run build-storybook
      report-script: vrt:report:reg
      report-title: ğŸ“¸ Storybook VRT Report
    permissions:
      actions: read
      contents: write
      pull-requests: write
    secrets: inherit

# E2E ãƒ†ã‚¹ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
#
# apps/web/ ã¾ãŸã¯ packages/ui/ é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸ PR ã§è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
# Next.js ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ã—ã€Playwright ã§ãƒšãƒ¼ã‚¸é·ç§»ã‚„ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¡¨ç¤ºãªã©ã‚’æ¤œè¨¼ã™ã‚‹ã€‚
# PR æ™‚ã¯ãƒ™ãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’å‹•çš„ç”Ÿæˆã—ã€reg-cli ã§å·®åˆ†ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã€‚
name: E2E Tests

on:
  pull_request:
    branches: [main]
    # apps/web/ ã¨ packages/ui/ ã®å¤‰æ›´æ™‚ã«å®Ÿè¡Œ
    # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¤‰æ›´ãŒ Web ã‚¢ãƒ—ãƒªã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ä¸¡æ–¹ã‚’ç›£è¦–
    paths:
      - "apps/web/**"
      - "packages/ui/**"
  workflow_dispatch:

jobs:
  e2e:
    # NOTE: VS Code ã® GitHub Actions æ‹¡å¼µãŒ "Unable to find reusable workflow" ã¨è¡¨ç¤ºã™ã‚‹ãŒã€
    # ãƒ­ãƒ¼ã‚«ãƒ«ã® workflow_call ã‚’è§£æ±ºã§ããªã„æ‹¡å¼µã®æ—¢çŸ¥ã®åˆ¶é™ã§ã‚ã‚Šã€å®Ÿéš›ã®å®Ÿè¡Œã«ã¯å½±éŸ¿ã—ãªã„ã€‚
    uses: ./.github/workflows/_playwright-test.yml
    with:
      test-type: web-e2e
      working-directory: apps/web
      build-command: bun run build
      report-script: e2e:report:reg
      report-title: ğŸ§ª E2E Test Report
    permissions:
      actions: read
      contents: write
      pull-requests: write
    secrets: inherit
